#include "tiffio.h"
int openimage(char *filename)
{
    TIFF* tif = TIFFOpen(filename, "r");
    if (tif) {
        tdata_t buf;
        tstrip_t strip;
        
		printf("Strip Size: %d\n",TIFFStripSize(tif));
        buf = _TIFFmalloc(TIFFStripSize(tif));
		int i = 0;
        for (strip = 0; strip < TIFFNumberOfStrips(tif); strip++)
    	{
	        TIFFReadEncodedStrip(tif, strip, buf, (tsize_t) -1);
			i++;
		}
		printf("Read Strips: %d\n", i);
        _TIFFfree(buf);
        TIFFClose(tif);
    }
	return 0;
}


int main(){
	openimage("image-good.tiff");
	openimage("image-bad.tiff");
	return 0;
}
